# Concept and Design
This is an e-commerce website for organic, biodynamic, and natural wines. I created it with two other teammates as a class project. First, we ideated and researched other existing concepts on the market. After that, we created a design from scratch without templates, touching on the logo, the color palette, and the fonts. We created a set of wireframes and then set to work on creating the project in Visual Studio Code in a Node.js environment. We followed scrum methodology across six sprints with dailies and retros. Trello helped us stay on task with the categories to do, in progress, to verify, and done. We organized the files in VS Code according to MVC architecture. The site has a client side and a back office for admins. Clients can create and edit a user profile, add wines to the cart, purchase orders, and use a contact form. From the back office, admins have CRUD functionalities for products, users, and the newsletter list.

# Frontend
The frontend has over 25 HTML views with integrated Javascript logic through EJS. We also employed partials for the headers and footers and used an extensive CSS sheet for the styling. We used a normalize CCS sheet as well for a basic global format. The routing architecture uses Express. The product and user controllers all have the CRUD capabilities. I created a custom dialogue box in Jquery to confirm deletions in the back office. The contact form uses Nodemailer to send a custom designed email to the company Gmail account. The main navigation bar and the cart summary have sticky properties so that they travel down the page as the user scrolls down. There’s also a search bar with word matching functionality. The back office has a search bar, too, for products and users.

When creating a new product, an admin can multiple select the wine’s category—organic, biodynamic, or natural—as well as multiple select its grape varietals. An admin can also upload an image with the help of the Multer middleware. All of these fields can later be edited and updated. Admins can also create, edit, and delete users, assigning client or admin roles. The home, products, and create user pages are responsive via media queries in the CSS sheet. If you try to add a product to the cart and aren’t logged in, you’ll redirected via a middleware to the log in page. Upon logging in, you’ll be redirected to the product’s detail page that you had originally clicked on. I accomplished this with the .replace method and a RegExp to extract the address’s category and the product’s ID. 

# Backend
We used SQL to build the database which we hosted on a local server through XAMMP. We employed Sequelize on the frontend to model the data and all the relationships between models. Most are many-to-one relationships with some one-to-one relationships. We created a pivot table for all the different tags a product can have and a separate tag_type table to label each kind of tag. This way we had a single scalable table for the current or future tags a product can have. We encountered a snag with structuring quantities into the table and ended up creating an order_products table with separate rows for each product and its respective quantities. The current order_id repeats in a new row as many times as products are in the order.

To pass information between views, we used res.locals. We used this to maintain users logged in, as well. We used middlewares to redirect users. If a client adds a product without an account, they’ll be redirected to create a user. A client cannot access the back office. If an admin logs in, they are automatically redirected to the back office via a middleware. The shopping has a bubble with a numerical value to indicate how many different products are in the cart. An API services this data.

# Other Functionalities
Within the cart, a user can use a counter to increase or decrease a product’s quantity. It has a 1 second counter that resets upon each input in order to improve user experience and postpone a whole page refresh until the user has stopped clicking the counter for more than one second. If a user adds the same product from either the product list, the search results, or the recommended list on the home page, only the quantity will update instead of creating a duplicate item in the cart. The forms are validated with Javascript functions and the error messages appear on the views through locals.errors. In case of errors, form fields retain their values through locals.errors so the user doesn’t have to retype everything while they fix the error. We used bcryptjs to encrypt the password, and users can edit their passwords. 
