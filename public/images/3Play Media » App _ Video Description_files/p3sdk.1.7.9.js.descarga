/*
* 3Play Media P3SDK, v1.7.9 - Mola Mola

* 3Play Media: Cambridge, MA, USA
* support@3playmedia.com
* Â©2017 3Play Media, Inc.  The following software is the sole and exclusive property of 3Play Media, Inc. and may not to be reproduced, modified, distributed or otherwise used, without the written approval of 3Play Media, Inc.  We have granted approval to our paying customers while they are our customers to reproduce, modify and use (but not distribute) this software for their own internal use only.  This means that if you are not a paying customer of 3Play Media, Inc., you may not reproduce, modify, distribute or otherwise use the code. 
* Paying customers who are permitted and do use this software are hereby advised that this software is provided "as is" and any express or implied warranties, including but not limited to, an implied warranty of merchantability and fitness for a particular purpose are disclaimed.  In no event shall 3Play Media, Inc. be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including but not limited to, procurement or substitute goods or services, loss of use, data or profits, or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.
*/
if("undefined"==typeof Zepto){var Zepto=function(){function t(t){return null==t?String(t):Z[F.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function a(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function o(t){return C.call(t,function(t){return null!=t})}function p(t){return t.length>0?b.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in T?T[t]:T[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||A[c(t)]?e:e+"px"}function h(t){var e,n;return N[t]||(e=j.createElement(t),j.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),N[t]=n),N[t]}function d(t){return"children"in t?I.call(t.children):b.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function f(t,e,n){for(w in e)n&&(a(e[w])||W(e[w]))?(a(e[w])&&!a(t[w])&&(t[w]={}),W(e[w])&&!W(t[w])&&(t[w]=[]),f(t[w],e[w],n)):e[w]!==$&&(t[w]=e[w])}function _(t,e){return null==e?b(t):b(t).filter(e)}function y(t,n,i,r){return e(n)?n.call(t,i,r):n}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function g(t,e){var n=t.className||"",i=n&&n.baseVal!==$;return e===$?i?n.baseVal:n:void(i?n.baseVal=e:t.className=e)}function v(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?b.parseJSON(t):t):t}catch(e){return t}}function k(t,e){e(t);for(var n=0,i=t.childNodes.length;i>n;n++)k(t.childNodes[n],e)}var $,w,b,x,P,E,S=[],I=S.slice,C=S.filter,j=window.document,N={},T={},A={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,D=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,O=/^(?:body|html)$/i,q=/([A-Z])/g,V=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],Y=j.createElement("table"),G=j.createElement("tr"),R={tr:j.createElement("tbody"),tbody:Y,thead:Y,tfoot:Y,td:G,th:G,"*":j.createElement("div")},B=/complete|loaded|interactive/,z=/^[\w-]*$/,Z={},F=Z.toString,J={},H=j.createElement("div"),X={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},W=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,a=!r;return a&&(r=H).appendChild(t),i=~J.qsa(r,e).indexOf(t),a&&H.removeChild(t),i},P=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},E=function(t){return C.call(t,function(e,n){return t.indexOf(e)==n})},J.fragment=function(t,e,n){var i,r,s;return D.test(t)&&(i=b(j.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(M,"<$1></$2>")),e===$&&(e=L.test(t)&&RegExp.$1),e in R||(e="*"),s=R[e],s.innerHTML=""+t,i=b.each(I.call(s.childNodes),function(){s.removeChild(this)})),a(n)&&(r=b(i),b.each(n,function(t,e){V.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},J.Z=function(t,e){return t=t||[],t.__proto__=b.fn,t.selector=e||"",t},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,n){var i;if(!t)return J.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&L.test(t))i=J.fragment(t,RegExp.$1,n),t=null;else{if(n!==$)return b(n).find(t);i=J.qsa(j,t)}else{if(e(t))return b(j).ready(t);if(J.isZ(t))return t;if(W(t))i=o(t);else if(r(t))i=[t],t=null;else if(L.test(t))i=J.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==$)return b(n).find(t);i=J.qsa(j,t)}}return J.Z(i,t)},b=function(t,e){return J.init(t,e)},b.extend=function(t){var e,n=I.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){f(t,n,e)}),t},J.qsa=function(t,e){var n,r="#"==e[0],a=!r&&"."==e[0],s=r||a?e.slice(1):e,o=z.test(s);return i(t)&&o&&r?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:I.call(o&&!r?a?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},b.contains=j.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},b.type=t,b.isFunction=e,b.isWindow=n,b.isArray=W,b.isPlainObject=a,b.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},b.inArray=function(t,e,n){return S.indexOf.call(e,t,n)},b.camelCase=P,b.trim=function(t){return null==t?"":String.prototype.trim.call(t)},b.uuid=0,b.support={},b.expr={},b.map=function(t,e){var n,i,r,a=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&a.push(n);else for(r in t)n=e(t[r],r),null!=n&&a.push(n);return p(a)},b.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},b.grep=function(t,e){return C.call(t,e)},window.JSON&&(b.parseJSON=JSON.parse),b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()}),b.fn={forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,indexOf:S.indexOf,concat:S.concat,map:function(t){return b(b.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return b(I.apply(this,arguments))},ready:function(t){return B.test(j.readyState)&&j.body?t(b):j.addEventListener("DOMContentLoaded",function(){t(b)},!1),this},get:function(t){return t===$?I.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return S.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):b(C.call(this,function(e){return J.matches(e,t)}))},add:function(t,e){return b(E(this.concat(b(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==$)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?I.call(t):b(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return b(n)},has:function(t){return this.filter(function(){return r(t)?b.contains(this,t):b(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:b(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:b(t)},find:function(t){var e,n=this;return e=t?"object"==typeof t?b(t).filter(function(){var t=this;return S.some.call(n,function(e){return b.contains(e,t)})}):1==this.length?b(J.qsa(this[0],t)):this.map(function(){return J.qsa(this,t)}):b()},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=b(t));n&&!(r?r.indexOf(n)>=0:J.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return b(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=b.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return _(e,t)},parent:function(t){return _(E(this.pluck("parentNode")),t)},children:function(t){return _(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return I.call(this.childNodes)})},siblings:function(t){return _(this.map(function(t,e){return C.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return b.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=b(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){b(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){b(this[0]).before(t=b(t));for(var e;(e=t.children()).length;)t=e.first();b(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=b(this),r=i.contents(),a=n?t.call(this,e):t;r.length?r.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){b(this).replaceWith(b(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=b(this);(t===$?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return b(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return b(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var n=this.innerHTML;b(this).empty().append(y(this,t,e,n))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=y(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(t))for(w in t)m(this,w,t[w]);else m(this,t,y(this,e,n,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:$},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){m(this,t)},this)})},prop:function(t,e){return t=X[t]||t,1 in arguments?this.each(function(n){this[t]=y(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(q,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,e):this.attr(n);return null!==i?v(i):$},val:function(t){return 0 in arguments?this.each(function(e){this.value=y(this,t,e,this.value)}):this[0]&&(this[0].multiple?b(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var n=b(this),i=y(this,t,e,n.offset()),r=n.offsetParent().offset(),a={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i,r=this[0];if(!r)return;if(i=getComputedStyle(r,""),"string"==typeof e)return r.style[P(e)]||i.getPropertyValue(e);if(W(e)){var a={};return b.each(e,function(t,e){a[e]=r.style[P(e)]||i.getPropertyValue(e)}),a}}var s="";if("string"==t(e))n||0===n?s=c(e)+":"+u(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(w in e)e[w]||0===e[w]?s+=c(w)+":"+u(w,e[w])+";":this.each(function(){this.style.removeProperty(c(w))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(b(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&S.some.call(this,function(t){return this.test(g(t))},l(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){x=[];var n=g(this),i=y(this,t,e,n);i.split(/\s+/g).forEach(function(t){b(this).hasClass(t)||x.push(t)},this),x.length&&g(this,n+(n?" ":"")+x.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===$)return g(this,"");x=g(this),y(this,t,e,x).split(/\s+/g).forEach(function(t){x=x.replace(l(t)," ")}),g(this,x.trim())}})},toggleClass:function(t,e){return t?this.each(function(n){var i=b(this),r=y(this,t,n,g(this));r.split(/\s+/g).forEach(function(t){(e===$?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===$?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===$?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=O.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(b(t).css("margin-top"))||0,n.left-=parseFloat(b(t).css("margin-left"))||0,i.top+=parseFloat(b(e[0]).css("border-top-width"))||0,i.left+=parseFloat(b(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||j.body;t&&!O.test(t.nodeName)&&"static"==b(t).css("position");)t=t.offsetParent;return t})}},b.fn.detach=b.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});b.fn[t]=function(r){var a,s=this[0];return r===$?n(s)?s["inner"+e]:i(s)?s.documentElement["scroll"+e]:(a=this.offset())&&a[t]:this.each(function(e){s=b(this),s.css(t,y(this,r,e,s[t]()))})}}),U.forEach(function(e,n){var i=n%2;b.fn[e]=function(){var e,r,a=b.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:J.fragment(n)}),s=this.length>1;return a.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var o=b.contains(j.documentElement,r);a.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return b(t).remove();r.insertBefore(t,e),o&&k(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},b.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return b(t)[e](this),this}}),J.Z.prototype=b.fn,J.uniq=E,J.deserializeValue=v,b.zepto=J,b}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=h++)}function n(t,n,a,s){if(n=i(n),n.ns)var o=r(n.ns);return(y[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!o.test(t.ns)||a&&e(t.fn)!==e(a)||s&&t.sel!=s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function a(t,e){return t.del&&!g&&t.e in v||!!e}function s(t){return k[t]||g&&v[t]||t}function o(n,r,o,p,l,h,d){var f=e(n),_=y[f]||(y[f]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(o);var r=i(e);r.fn=o,r.sel=l,r.e in k&&(o=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var f=h||o;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=p;var e=f.apply(n,t._args==u?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=_.length,_.push(r),"addEventListener"in n&&n.addEventListener(s(r.e),r.proxy,a(r,d))})}function p(t,i,r,o,p){var c=e(t);(i||"").split(/\s/).forEach(function(e){n(t,e,r,o).forEach(function(e){delete y[c][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,a(e,p))})})}function c(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(x,function(t,i){var r=n[t];e[t]=function(){return this[i]=$,r&&r.apply(n,arguments)},e[i]=w}),(n.defaultPrevented!==u?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=$)),e}function l(t){var e,n={originalEvent:t};for(e in t)b.test(e)||t[e]===u||(n[e]=t[e]);return c(n,t)}var u,h=1,d=Array.prototype.slice,f=t.isFunction,_=function(t){return"string"==typeof t},y={},m={},g="onfocusin"in window,v={focus:"focusin",blur:"focusout"},k={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",t.event={add:o,remove:p},t.proxy=function(n,i){var r=2 in arguments&&d.call(arguments,2);if(f(n)){var a=function(){return n.apply(i,r?r.concat(d.call(arguments)):arguments)};return a._zid=e(n),a}if(_(i))return r?(r.unshift(n[i],n),t.proxy.apply(null,r)):t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var $=function(){return!0},w=function(){return!1},b=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i,r,a){var s,c,h=this;return e&&!_(e)?(t.each(e,function(t,e){h.on(t,n,i,e,a)}),h):(_(n)||f(r)||r===!1||(r=i,i=n,n=u),(f(i)||i===!1)&&(r=i,i=u),r===!1&&(r=w),h.each(function(u,h){a&&(s=function(t){return p(h,t.type,r),r.apply(this,arguments)}),n&&(c=function(e){var i,a=t(e.target).closest(n,h).get(0);return a&&a!==h?(i=t.extend(l(e),{currentTarget:a,liveFired:h}),(s||r).apply(a,[i].concat(d.call(arguments,1)))):void 0}),o(h,e,r,i,n,c||s)}))},t.fn.off=function(e,n,i){var r=this;return e&&!_(e)?(t.each(e,function(t,e){r.off(t,n,e)}),r):(_(n)||f(i)||i===!1||(i=n,n=u),i===!1&&(i=w),r.each(function(){p(this,e,i,n)}))},t.fn.trigger=function(e,n){return e=_(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=n,this.each(function(){e.type in v&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,i){var r,a;return this.each(function(s,o){r=l(_(e)?t.Event(e):e),r._args=i,r.target=o,t.each(n(o,e.type||e),function(t,e){return a=e.proxy(r),!r.isImmediatePropagationStopped()&&void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){_(t)||(e=t,t=e.type);var n=document.createEvent(m[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),c(n)}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function n(t,n,i,r){return t.global?e(n||g,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function a(t,e){var i=e.context;return e.beforeSend.call(i,t,e)!==!1&&n(e,i,"ajaxBeforeSend",[t,e])!==!1&&void n(e,i,"ajaxSend",[t,e])}function s(t,e,i,r){var a=i.context,s="success";i.success.call(a,t,s,e),r&&r.resolveWith(a,[t,s,e]),n(i,a,"ajaxSuccess",[e,i,t]),p(s,e,i)}function o(t,e,i,r,a){var s=r.context;r.error.call(s,i,e,t),a&&a.rejectWith(s,[i,e,t]),n(r,s,"ajaxError",[i,r,t||e]),p(e,i,r)}function p(t,e,i){var a=i.context;i.complete.call(a,e,t),n(i,a,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==b?"html":t==w?"json":k.test(t)?"script":$.test(t)&&"xml")||"text"}function u(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=u(e.url,e.data),e.data=void 0)}function d(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function f(e,n,i,r){var a,s=t.isArray(n),o=t.isPlainObject(n);t.each(n,function(n,p){a=t.type(p),r&&(n=i?r:r+"["+(o||"object"==a||"array"==a?n:"")+"]"),!r&&s?e.add(p.name,p.value):"array"==a||!i&&"object"==a?f(e,p,i,n):e.add(n,p)})}var _,y,m=0,g=window.document,v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,k=/^(?:text|application)\/javascript/i,$=/^(?:text|application)\/xml/i,w="application/json",b="text/html",x=/^\s*$/,P=g.createElement("a");P.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var i,r,p=e.jsonpCallback,c=(t.isFunction(p)?p():p)||"jsonp"+ ++m,l=g.createElement("script"),u=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},d={abort:h};return n&&n.promise(d),t(l).on("load error",function(a,p){clearTimeout(r),t(l).off().remove(),"error"!=a.type&&i?s(i[0],d,e,n):o(null,p||"error",d,e,n),window[c]=u,i&&t.isFunction(u)&&u(i[0]),u=i=void 0}),a(d,e)===!1?(h("abort"),d):(window[c]=function(){i=arguments},l.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),g.head.appendChild(l),e.timeout>0&&(r=setTimeout(function(){h("timeout")},e.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:b,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,r=t.extend({},e||{}),p=t.Deferred&&t.Deferred();for(_ in t.ajaxSettings)void 0===r[_]&&(r[_]=t.ajaxSettings[_]);i(r),r.crossDomain||(n=g.createElement("a"),n.href=r.url,n.href=n.href,r.crossDomain=P.protocol+"//"+P.host!=n.protocol+"//"+n.host),r.url||(r.url=window.location.toString()),h(r);var d=r.dataType,f=/\?.+=\?/.test(r.url);if(f&&(d="jsonp"),r.cache!==!1&&(e&&e.cache===!0||"script"!=d&&"jsonp"!=d)||(r.url=u(r.url,"_="+Date.now())),"jsonp"==d)return f||(r.url=u(r.url,r.jsonp?r.jsonp+"=?":r.jsonp===!1?"":"callback=?")),t.ajaxJSONP(r,p);var m,v=r.accepts[d],k={},$=function(t,e){k[t.toLowerCase()]=[t,e]},w=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,b=r.xhr(),E=b.setRequestHeader;if(p&&p.promise(b),r.crossDomain||$("X-Requested-With","XMLHttpRequest"),$("Accept",v||"*/*"),(v=r.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(v)),(r.contentType||r.contentType!==!1&&r.data&&"GET"!=r.type.toUpperCase())&&$("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(y in r.headers)$(y,r.headers[y]);if(b.setRequestHeader=$,b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c,clearTimeout(m);var e,n=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==w){d=d||l(r.mimeType||b.getResponseHeader("content-type")),e=b.responseText;try{"script"==d?(0,eval)(e):"xml"==d?e=b.responseXML:"json"==d&&(e=x.test(e)?null:t.parseJSON(e))}catch(t){n=t}n?o(n,"parsererror",b,r,p):s(e,b,r,p)}else o(b.statusText||null,b.status?"error":"abort",b,r,p)}},a(b,r)===!1)return b.abort(),o(null,"abort",b,r,p),b;if(r.xhrFields)for(y in r.xhrFields)b[y]=r.xhrFields[y];var S=!("async"in r)||r.async;b.open(r.type,r.url,S,r.username,r.password);for(y in k)E.apply(b,k[y]);return r.timeout>0&&(m=setTimeout(function(){b.onreadystatechange=c,b.abort(),o(null,"timeout",b,r,p)},r.timeout)),b.send(r.data?r.data:null),b},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,a=this,s=e.split(/\s/),o=d(e,n,i),p=o.success;return s.length>1&&(o.url=s[0],r=s[1]),o.success=function(e){a.html(r?t("<div>").html(e.replace(v,"")).find(r):e),p&&p.apply(a,arguments)},t.ajax(o),this};var E=encodeURIComponent;t.param=function(e,n){var i=[];return i.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(E(e)+"="+E(n))},f(i,e,n),i.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n,i=[],r=function(t){return t.forEach?t.forEach(r):void i.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(i,a){n=a.type,e=a.name,e&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||a.checked)&&r(t(a).val())}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(t){return null}}}}(Zepto)}var p3$=Zepto,p3sdk={instances:[],create_instance:function(t){var e=p3sdk.instances.length,n={player_id:t.player_id,player_type:t.player_type,player_ready:!1,debug:t.debug,player:!1,instance_index:e,current_time:-1,track_player:function(){setInterval(function(){if(n.player_ready){m=n.player.position(),v=!1;try{v=n.player.video_id()}catch(t){}m!=n.current_time&&(n.current_time=m,n.event.trigger("player:progress",{m:m,video_id:v}))}else(n.player_ready=n.player&&n.player.play)&&n.event.trigger("player:ready",{})},333)},event:{trigger:function(t,i){setTimeout(function(){p3$(p3sdk.get(e)).trigger(t,i),n.debug&&console.dir(p3$.extend(i,{event_name:t}))},0)}}},i=setInterval(function(){try{n.player=new p3sdk.player_interface[t.player_type](t.player_id,n)}catch(t){return!1}clearInterval(i)},1e3);return this.instances.push(n),n},get:function(t){if("number"==typeof t&&this.instances[t])return this.instances[t];for(i in this.instances)if(this.instances[i].player_id==t)return this.instances[i];return!1},init:function(t){if(!p3$(t).attr("initialized")){var e={player_id:p3$(t).attr("player_id"),player_type:p3$(t).attr("player_type"),debug:p3$(t).hasClass("p3sdk-debug")},n=p3sdk.create_instance(e);n.track_player(),p3$(t).find(".p3sdk-interactive-transcript").each(function(){n.interactive_transcripts=n.interactive_transcripts||[],n.interactive_transcripts.push(new p3sdk.interactive_transcript(n,this))}),p3$(t).find(".p3sdk-playlist").each(function(){n.playlists=n.playlists||[],n.playlists.push(new p3sdk.playlist(n,this))}),p3$(t).attr("initialized",!0)}}};p3sdk.player_interface={viddler:function(t){this.playerInstance=window[t],this.play=function(){this.playerInstance.manager.play()},this.pause=function(){this.playerInstance.manager.pause()},this.seek=function(t){this.play(),this.playerInstance.manager.seekTo(t)},this.position=function(){return parseInt(this.playerInstance.manager.currentTime)},this.duration=function(){return this.playerInstance.manager.currentPrimaryTrack.mediaElements[0].duration},this.play_state=function(){return"PLAYING"==this.playerInstance.manager.status.toUpperCase()?"PLAYING":"PAUSED"},this.get_volume=function(){},this.set_volume=function(){}},html5:function(t){if(this.player_id=t,player=p3$("#"+this.player_id).get(0),4!=player.readyState)throw"not_ready";this.play=function(){player.play()},this.pause=function(){player.pause()},this.play_state=function(){return player.paused?"PAUSED":"PLAYING"},this.seek=function(t){player.play(),player.currentTime=t/1e3},this.position=function(){return 1e3*p3$("#"+this.player_id).get(0).currentTime},this.duration=function(){return parseInt(1e3*player.duration,10)},this.play_state=function(){return player.paused?"PAUSED":"PLAYING"},this.get_volume=function(){return player.volume},this.set_volume=function(t){player.volume=t}},youtube:function(t){if("undefined"==typeof YT||"undefined"==typeof YT.Player)throw"not_ready";if(!YT.loaded)throw"not_ready";this.youtube_player=new YT.Player(t),this.player_id=t,this.play=function(){this.youtube_player.playVideo()},this.pause=function(){this.youtube_player.pauseVideo()},this.seek=function(t){this.youtube_player.seekTo(t/1e3,!0)},this.position=function(){return parseInt(1e3*this.youtube_player.getCurrentTime()+.5)},this.duration=function(){return parseInt(1e3*this.youtube_player.getDuration()+.5)},this.play_video_id=function(t){this.youtube_player.loadVideoById(t)},this.video_id=function(){return this.youtube_player.getVideoData().video_id},this.play_video_id_at_time=function(t,e){this.youtube_player.loadVideoById({videoId:t,startSeconds:e/1e3})},this.play_state=function(){return 1===this.youtube_player.getPlayerState()?"PLAYING":"PAUSED"},this.get_volume=function(){return this.youtube_player.getVolume()},this.set_volume=function(t){this.youtube_player.setVolume(100*t)}},jw7:function(t){this.playerInstance=jwplayer(t),this.play=function(){this.playerInstance.play(!0)},this.pause=function(){this.playerInstance.pause(!0)},this.seek=function(t){this.playerInstance.seek(parseInt(t/1e3))},this.position=function(){return parseInt(1e3*this.playerInstance.getPosition()+.5)},this.duration=function(){return 1e3*this.playerInstance.getDuration()},this.play_state=function(){return"playing"==this.playerInstance.getState()?"PLAYING":"PAUSED"},this.get_volume=function(){return this.playerInstance.getVolume()},this.set_volume=function(t){this.playerInstance.setVolume(100*t)}},wistia:function(t){this.wistia=Wistia.api(t),this.play=function(){this.wistia.play()},this.pause=function(){this.wistia.pause()},this.seek=function(t){this.wistia.time(t/1e3),this.wistia.play()},this.position=function(){return parseInt(1e3*this.wistia.time()+.5)},this.duration=function(){return 1e3*this.wistia.duration()},this.play_video_id=function(t){this.wistia.replaceWith(t)},this.play_state=function(){return"playing"===this.wistia.state()?"PLAYING":"PAUSED"},this.get_volume=function(){return player.volume()},this.set_volume=function(t){player.volume(t)}},wistia_iframe:function(t){this.wistia_iframe=Wistia.api(t),this.play=function(){this.wistia_iframe.play()},this.pause=function(){this.wistia_iframe.pause()},this.seek=function(t){this.wistia_iframe.time(t/1e3),this.wistia_iframe.play()},this.position=function(){return parseInt(1e3*this.wistia_iframe.time()+.5)},this.duration=function(){return 1e3*this.wistia_iframe.duration()},this.play_video_id=function(){},this.play_state=function(){return"playing"===this.wistia.state()?"PLAYING":"PAUSED"},this.get_volume=function(){return player.volume()},this.set_volume=function(t){player.volume(t)}},kaltura:function(t){if(this.kaltura_player=p3$("#"+t).get(0),!this.kaltura_player||!this.kaltura_player.kBind)throw"not_ready";this.player_state="PAUSED",this.playhead_time=0,this.player_id=t,this.seek_to=!1,this.play_handler=function(){this.player_state="PLAYING"},this.pause_handler=function(){this.player_state="PAUSED"},this.playhead_handler=function(t){this.player_state="PLAYING",this.playhead_time=1e3*parseFloat(t)},this.kaltura_player.kBind("playerPlayed",function(t){p3sdk.get(t).player.play_handler()}),this.kaltura_player.kBind("playerProgress",function(t){p3sdk.get(t).player.play_handler()}),this.kaltura_player.kBind("playerPaused",function(t){p3sdk.get(t).player.pause_handler()}),this.kaltura_player.kBind("playerPlayEnd",function(t){p3sdk.get(t).player.pause_handler()}),this.play=function(){this.kaltura_player.sendNotification("doPlay")},this.pause=function(){this.kaltura_player.sendNotification("doPause")},this.seek=function(t){this.kaltura_player.sendNotification("doSeek",t/1e3),this.play()},this.position=function(){return 1e3*this.kaltura_player.evaluate("{video.player.currentTime}")},this.duration=function(){return 1e3*this.kaltura_player.evaluate("{mediaProxy.entry.duration}")},this.video_id=function(){return this.kaltura_player.evaluate("{mediaProxy.entry.id}")},this.play_video_id=function(t){this.kaltura_player.sendNotification("changeMedia",{entryId:t,seekFromStart:1}),setTimeout(function(){parent.play()},10)},this.play_video_id_at_time=function(t,e){this.kaltura_player.sendNotification("changeMedia",{entryId:t,seekFromStart:e.toString()}),setTimeout(function(){parent.play()},10)},this.play_state=function(){return this.player_state},this.get_volume=function(){return this.kaltura_player.volume},this.set_volume=function(t){this.kaltura_player.sendNotification("changeVolume",t)}},soundcloud:function(t){var e=this;this.player_id=t;var n=p3$("#"+this.player_id).get(0);this.soundcloud_player=SC.Widget(n),this.soundcloud_player.bind("playProgress",function(t){e.player_position=t.currentPosition,e.player_state="PLAYING"}),this.soundcloud_player.bind("pause",function(t){
e.player_position=t.currentPosition,e.player_state="PAUSED"}),this.soundcloud_player.bind("finish",function(t){e.player_position=t.currentPosition,e.player_state="PAUSED"}),this.play=function(){this.soundcloud_player.play()},this.pause=function(){this.soundcloud_player.pause()},this.seek=function(t){this.soundcloud_player.isPaused()&&this.soundcloud_player.play(),this.soundcloud_player.seekTo(t)},this.position=function(){return e.player_position?e.player_position:0},this.play_state=function(){return"PAUSED"},this.get_volume=function(){return player.getVolume()},this.set_volume=function(t){player.setVolume(t)}},videojs:function(t){this.playerInstance=videojs(t),this.play=function(){this.playerInstance.play()},this.pause=function(){this.playerInstance.pause()},this.seek=function(t){this.playerInstance.currentTime(parseInt(t/1e3)),this.playerInstance.play()},this.position=function(){return parseInt(1e3*this.playerInstance.currentTime()+.5)},this.duration=function(){return 1e3*this.playerInstance.duration()},this.play_video_id=function(t){this.player.src(t)},this.video_id=function(){return 0},this.play_state=function(){return this.playerInstance.paused()?"PAUSED":"PLAYING"},this.get_volume=function(){return player.volume()},this.set_volume=function(t){player.volume(t)}},soundmanager2:function(t){if("undefined"==typeof soundManager)throw"not_ready";if(!soundManager.getSoundById(t))throw"not_ready";var e=this;this.player_id=t,this.playerInstance=function(){return soundManager.getSoundById(e.player_id)},this.play=function(){this.playerInstance().play(t)},this.pause=function(){this.playerInstance().pause(t)},this.seek=function(e){this.playerInstance().setPosition(e),this.playerInstance().play(t)},this.position=function(){return parseInt(this.playerInstance().position,10)},this.duration=function(){return this.playerInstance().duration},this.play_state=function(){return"PAUSED"},this.get_volume=function(){return player.volume},this.set_volume=function(t){player.setVolume(100*t)}},ooyala:function(t){this.player_id=t,player=window[this.player_id],this.play=function(){player.playMovie()},this.pause=function(){player.pauseMovie()},this.seek=function(t){player.playMovie();var e=t/1e3;player.seek(e)},this.position=function(){return 1e3*player.getPlayheadTime()},this.duration=function(){return 1e3*player.getCurrentItem().time},this.video_id=function(){return player.getCurrentItemEmbedCode()},this.play_state=function(){return"playing"===player.getState()?"PLAYING":"PAUSED"},this.get_volume=function(){return player.getVolume()},this.set_volume=function(t){player.setVolume(t)}},ooyala_v4:function(t){this.player_id=t,this.player=function(){return window[this.player_id]},this.play=function(){this.player().play()},this.pause=function(){this.player().pause()},this.seek=function(t){this.player().play();var e=t/1e3;this.player().seek(e)},this.position=function(){return 1e3*this.player().getPlayheadTime()},this.duration=function(){return 1e3*this.player().getDuration()},this.video_id=function(){return this.player().getEmbedCode()},this.play_state=function(){return this.player().isPlaying()?"PLAYING":"PAUSED"},this.get_volume=function(){return player.getVolume()},this.set_volume=function(t){player.setVolume(t)}},brightcove:function(t){var e=this,t=t;if("undefined"==typeof videojs(t))throw"not_ready";this.player=function(){return videojs(t)},this.play=function(){this.player().play()},this.pause=function(){this.player().pause()},this.seek=function(t){this.player().paused()&&this.player().play(),this.player().currentTime(t/1e3)},this.position=function(){return 1e3*this.player().currentTime()},this.duration=function(){return 1e3*this.player().duration()},this.video_id=function(){return this.player().mediainfo.id},this.play_video_id=function(t,n){this.player().catalog.getVideo(t,function(t,i){e.player().catalog.load(i),setTimeout(function(){e.seek(n||0)},1)})},this.play_video_id_at_time=function(t,n){e.play_video_id(t,n)},this.play_state=function(){return this.player().paused()?"PAUSED":"PLAYING"},this.get_volume=function(){return this.player().volume()},this.set_volume=function(t){this.player().volume(t)}},brightcove_legacy:function(t,e){var n=this;n.instance=e;var i=brightcove.getExperience(t),r=i.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);i.getModule(APIModules.EXPERIENCE),i.getModule(APIModules.CONTENT);r.addEventListener(BCMediaEvent.PLAY,function(){}),r.addEventListener(BCMediaEvent.STOP,function(){}),r.addEventListener(BCMediaEvent.BEGIN,function(){}),r.addEventListener(BCMediaEvent.PROGRESS,function(t){n.player_info.position=parseInt(1e3*parseFloat(t.position),10)}),this.player_info={position:0},this.play=function(){r.play()},this.pause=function(){r.pause()},this.seek=function(t){r.play(),r.seek(t/1e3)},this.position=function(){return this.player_info.position},this.duration=function(){return 1e3*r.getVideoDuration()},this.play_state=function(){return r.isPlaying()?"PLAYING":"PAUSED"}},limelight:function(){this.play=function(){LimelightPlayer.doPlay()},this.pause=function(){LimelightPlayer.doPause()},this.seek=function(t){LimelightPlayer.doSeekToSecond(t/1e3)},this.position=function(){return LimelightPlayer.doGetPlayheadPositionInMilliseconds()},this.duration=function(){return LimelightPlayer.doGetCurrentMedia().durationInMilliseconds},this.play_video_id=function(t){this.play(),LimelightPlayer.doLoadMedia(t,!0,0)},this.play_state=function(){return LimelightPlayer.doGetCurrentPlayState().isPlaying===!0?"PLAYING":"PAUSED"},this.get_volume=function(){return LimelightPlayer.doGetVolume()},this.set_volume=function(t){LimelightPlayer.doSetVolume(t)}},vimeo_iframe:function(t,e){var n=this;if(n.instance=e,this.vimeo_player_id=t,"undefined"==typeof $f)throw"not_ready";if(this.vimeo_player=$f(t),!this.vimeo_player)throw"not_ready";this.playhead_time=0,this.player_state="PAUSED",this.duration=!1;var i={};PlayerInterfaceExtension_VimeoIframe=function(t){var e=this;this.player_interface=t,this.playhead_handler=function(t){e.player_interface.player_state="PLAYING",e.player_interface.playhead_time=1e3*parseFloat(t.seconds)}},i[t]=new PlayerInterfaceExtension_VimeoIframe(this),this.vimeo_player.addEvent("play",function(t){i[t].play_handler(t)}),this.vimeo_player.addEvent("onPause",function(t){i[t].pause_handler(t)}),this.vimeo_player.addEvent("onLoading",function(t){i[t].pause_handler(t)}),this.vimeo_player.addEvent("onFinish",function(t){i[t].pause_handler(t)}),this.vimeo_player.addEvent("playProgress",function(t,e){i[e].playhead_handler(t,e)}),this.play=function(){n.vimeo_player.api("play")},this.pause=function(){n.vimeo_player.api("pause")},this.position=function(){return this.playhead_time||0},this.seek=function(t){var e=Math.max(0,t/1e3-1);n.vimeo_player.api("seekTo",e)},this.duration=function(){return n.vimeo_player.duration?duration:void n.vimeo_player.api("getDuration",function(t){})},this.play_video_id=function(t){n.vimeo_player.api("loadVideo",t)},this.play_state=function(){return n.player_state}},flowplayer:function(t){if(!flowplayer().ready)throw"not_ready";this.player_id=t,this.play=function(){flowplayer().play()},this.pause=function(){flowplayer().pause()},this.seek=function(t){flowplayer().seek(t/1e3),flowplayer().play()},this.position=function(){return 1e3*flowplayer().video.time},this.duration=function(){return 1e3*flowplayer().video.duration},this.play_video_id=function(t){flowplayer().load(t)},this.play_state=function(){return flowplayer().paused?"PAUSED":"PLAYING"},this.get_volume=function(){return flowplayer().volumeLevel},this.set_volume=function(t){flowplayer().volume(t)}},noplayer:function(){this.play=function(){return!0},this.pause=function(){return!0},this.seek=function(){return!0},this.position=function(){return 0},this.duration=function(){return 1},this.play_video_id=function(){return!1},this.video_id=function(){return!1},this.play_video_id_at_time=function(){return!1},this.play_state=function(){return"PAUSED"},this.get_volume=function(){return 1},this.set_volume=function(){return!0}},ableplayer:function(t){if(this.player_id=t,player=p3$("#"+this.player_id).get(0),4!=player.readyState)throw"not_ready";this.play=function(){player.play()},this.pause=function(){player.pause()},this.seek=function(t){player.play(),player.currentTime=t/1e3},this.position=function(){return 1e3*p3$("#"+this.player_id).get(0).currentTime},this.duration=function(){return parseInt(1e3*player.duration,10)},this.play_state=function(){return player.paused?"PAUSED":"PLAYING"}},vimeo_v2:function(t){var e=this,n=window[t],i=new Vimeo.Player(n);this.currentPosition=0,this.currentDuration=0,this.currentPlayState="PAUSED",i.on("progress",function(t){e.currentDuration=1e3*t.duration}),i.on("timeupdate",function(t){e.currentPosition=1e3*t.seconds,e.currentDuration=1e3*t.duration}),i.on("pause",function(){e.currentPlayState="PAUSED"}),i.on("play",function(){e.currentPlayState="PLAYING"}),i.on("ended",function(){e.currentPlayState="PAUSED"}),this.play=function(){i.play()},this.pause=function(){i.pause()},this.seek=function(t){i.setCurrentTime(t/1e3),this.play()},this.position=function(){return this.currentPosition},this.duration=function(){return this.currentDuration},this.play_state=function(){return this.currentPlayState},this.get_volume=function(){return i.getVolume()},this.set_volume=function(t){i.setVolume(t)}}},p3sdk.util={stamp_to_ms:function(t){t=t.replace(/\,/g,".");var e=t.split(/\:/),n=parseFloat(e[e.length-1]),i=parseInt(e[e.length-2],10),r=e.length>2?parseInt(e[e.length-3],10):0;return 1e3*(3600*r+60*i+n)},ms_to_stamp:function(t){var e=parseInt(t)/1e3,n=parseInt(e/60);return e%=60,e=e<10?"0"+e:e,(n+":"+e).replace(/\.\d*$/,"")},end_of_sentence:function(t){return/[\.\?\!]$/.test(t)},params:function(t){if(t=t||location.href,parts=t.replace(/\#.*$/,"").split("?"),params={},parts.length>1){pp=parts[1].split("&");for(i in pp)p=pp[i].split("="),params[p[0]]=p[1]}return params},selected_html:function(){try{var t;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt)var e=t.getRangeAt(0);else{var e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}var n=e.cloneContents(),r=n.childNodes;for(i=0;i<r.length;i++)r[i].style&&(r[i].style.backgroundColor="#fff");var a=document.createElement("div");return a.appendChild(n),a.innerHTML}if(document.selection)return t=document.selection.createRange(),t.htmlText}catch(t){}return!1},load_remote_script:function(t,e){var n=document.createElement("script");if(n.src=t,n.type="text/javascript",e){n.onload=n.onreadystatechange=function(){return("undefined"==typeof n.readyState||"complete"==n.readyState||"loaded"==n.readyState)&&void e()};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}else p3$("script").get(0).parentNode.appendChild(n)},load_stemmer:function(){p3sdk.util.stemmer_loaded||(p3sdk.util.stemmer_loaded=!0,"undefined"==typeof Snowball&&p3sdk.util.load_remote_script("//p3.3playmedia.com/javascripts/vendor/Snowball.min.js"))}},p3sdk.api={base_path:(/http/.test(location.protocol)?location.protocol:"http:")+"//static.3playmedia.com/p/projects/",get:function(t,e,n){var i=/^http/.test(t)?t:this.base_path+t;i+="?"+p3$.param(e),p3$.get(i,n)},getJSON:function(t,e,n){var i=/^http/.test(t)?t:this.base_path+t;i+="?"+p3$.param(e),p3$.getJSON(i,n)},get_keywords_async:function(t,e,n){var i=t.project_id+"/files/"+t.file_id+"/keywords.js";t.use_video_id&&(e.usevideoid=1),this.get(i,e,n)},get_transcript_async:function(t,e,n){var i=e.format||"html",r=t.project_id+"/files/"+t.file_id+"/transcript."+i;t.use_video_id&&(e.usevideoid=1),t.use_caption_frames&&(e.use_caption_frames=1),getter="tpm"==i?"getJSON":"get",this[getter](r,e,n)},transcript_download_url:function(t,e){var e=e||"html",n=this.base_path;return n+=t.project_id+"/files/"+t.file_id+"/transcript."+e,n+="?dl=1",t.use_video_id&&(n+="&usevideoid=1"),n}},p3sdk.interactive_transcript=function(instance,el){var container=el,content_container=p3$(el).find(".p3sdk-interactive-transcript-content"),parent=this;this.instance=instance,this.container=container,this.module_index=instance.interactive_transcripts.length,this.config=function(){var t={},e=p3$(container).get(0).attributes;for(i in e){var n=e[i].nodeValue;switch(n){case"true":n=!0;break;case"false":n=!1}"undefined"!=typeof e[i].nodeName&&(t[e[i].nodeName]=n)}return t},this.update_config=function(t,e){e="string"==typeof e?e:JSON.stringify(e),p3$(container).attr(t,e)},this.init=function(){this.load_transcript(),this.listeners(),this.loaders(),parent.trigger_event("transcript:initialized",{})},this.trigger_event=function(t,e){e=p3$.extend(e||{},{module_index:parent.module_index,container_id:p3$(container).attr("id")}),parent.instance.event.trigger(t,e)},this.loaders=function(){if(window.location.hash){var t={};p3$.map(window.location.hash.replace(/^\#/,"").split("&"),function(e){x=e.split(":"),t[x[0]]=x[1]}),t.p3clip&&(parts=t.p3clip.split("."),parts[0]==parent.instance.instance_index&&parts[1]==parent.module_index&&(parent.onload_clip={in_time:parts[2],out_time:parts[3]},parts.length>=5&&(parent.onload_clip.video_id=parts[4])))}},this.listeners=function(){p3$(content_container).mouseenter(function(){parent.update_config("scroll_locked",!0)}).mouseleave(function(){parent.update_config("scroll_locked",!1)}),p3$(container).on("click",".p3sdk-scroll-toggle",function(){var t="p3sdk-scroll-toggle-locked";p3$(this).hasClass(t)?(p3$(this).removeClass(t),p3$(this).html(p3$(this).attr("label_when_unlocked")),parent.update_config("scroll_always_off",!0)):(p3$(this).addClass(t),p3$(this).html(p3$(this).attr("label_when_locked")),parent.update_config("scroll_always_off",!1))}),p3$(content_container).click(function(t){return!!parent.config().disable_transcript_click||void("span"==t.target.tagName.toLowerCase()&&parent.instance.player.seek(p3$(t.target).attr("m")))}),p3$(container).find(".p3sdk-interactive-transcript-searchbox").length>0&&p3sdk.util.load_stemmer(),parent.search_timeout=!1,p3$(container).on("keyup",".p3sdk-interactive-transcript-searchbox",function(t){if(clearTimeout(parent.search_timeout),27==(t.keyCode||t.which))return p3$(this).val(""),parent.clear_searched_transcript(),!0;var e=p3$(this).val();parent.search_timeout=setTimeout(function(){parent.search_transcript(e)},250)}),p3$(container).on("click",".p3sdk-interactive-transcript-download",function(){var t=p3$(this).attr("download_format"),e=p3sdk.api.transcript_download_url(parent.config(),t);location.href=e}),p3$(container).on("click",".p3sdk-interactive-transcript-progressbar",function(t){var e=(t.offsetX||t.layerX)/p3$(this).width(),n=e*parent.instance.player.duration();parent.instance.player.seek(n)}),p3$(container).on("click",".p3sdk-progress-search-marker",function(){parent.instance.player.seek(p3$(this).attr("m"))}),p3$(container).on("click",".p3sdk-interactive-transcript-collapse",function(){var t=p3$(container).children().not(".p3sdk-interactive-transcript-collapse, .p3sdk-interactive-transcript-collapse-visible");1==p3$(this).attr("collapsed")?(p3$(t).show(),p3$(this).attr("collapsed",0),p3$(this).html(p3$(this).attr("label_when_expanded")),parent.trigger_event("transcript:expand",{})):(p3$(t).hide(),p3$(this).attr("collapsed",1),p3$(this).html(p3$(this).attr("label_when_collapsed")),parent.trigger_event("transcript:collapse",{}))}),p3$(container).find(".p3sdk-collapse-onload").click(),p3$(container).on("change",".p3sdk-interactive-transcript-track-select",function(){parent.load_remote_track(p3$(this).val(),$(this).attr("src_type")),parent.trigger_event("transcript:track_selected",{target_element:this})}),p3$(container).on("click",".p3sdk-interactive-transcript-track",function(){parent.load_remote_track(p3$(this).attr("remote-src")),parent.trigger_event("transcript:track_selected",{target_element:this})}),p3$(container).on("click",".p3sdk-interactive-transcript-toggle-keywords",function(){p3$(this).prop("checked")?parent.load_keywords(this):parent.clear_keywords(this)}),p3$(container).on("click",".p3sdk-interactive-transcript-toggle-keywords-button",function(){var t="p3sdk-keywords-on";p3$(this).toggleClass(t),p3$(this).hasClass("p3sdk-keywords-on")?parent.load_keywords(this):parent.clear_keywords(this)}),p3$(content_container).on("mouseup","span",function(){var t=p3sdk.util.selected_html();/\</.test(t)||""==t||(t=p3$(this).get(0).outerHTML);var e=p3$("<div>"+t+"</div>");if(e.find("span").length<(parent.config().clip_min_length||3))return!1;var n={in_time:parseInt(e.find("span").eq(0).attr("m"),10),out_time:parseInt(e.find("span").eq(-1).attr("m"),10),text:t.replace(/\<[^\>]+?\>/g,"").replace(/\s+/," "),elements:p3$(e).find("span")};parent.current_clip=n,parent.trigger_event("transcript:selection",n)}),p3$(container).on("click",".p3sdk-share",function(){var t="",e=location.href;switch(!0){case p3$(this).hasClass("p3sdk-facebook"):t="http://www.facebook.com/share.php?u="+encodeURIComponent(e)+"&t="+encodeURIComponent("Video Bookmark");break;case p3$(this).hasClass("p3sdk-twitter"):t="http://twitter.com/?status=Video Bookmark "+encodeURIComponent(e)+" #3playmedia"}t&&window.open(t)}),p3$(this.instance).bind("transcript:clear_search",function(){p3$(container).find(".p3sdk-progress-search-marker").remove()}),p3$(this.instance).bind("transcript:search",function(t,e){var n=p3$(".p3sdk-interactive-transcript-progressbar"),i=p3$(n).attr("search_result_marker");if(!i)return!1;var r=parent.instance.player.duration()||parseInt(p3$(content_container).find("span").last().attr("m"),10);p3$(n).css({position:"relative"}),p3$(e.matches).each(function(t,e){var a=100*(e/r)+"%",s=document.createElement("span");p3$(s).addClass("p3sdk-progress-search-marker"),p3$(s).html(i),p3$(s).attr("m",e),p3$(n).append(s),p3$(s).css({position:"absolute",left:a,zIndex:2e7,top:0})})}),p3$(this.instance).bind("player:progress",function(t,e){if(parent.config().platform_integration&&e.video_id!=parent.config().file_id&&(parent.update_config("file_id",e.video_id),parent.update_config("use_video_id",1),parent.load_transcript()),Math.abs(e.m-parent.current_m)>2e3&&parent.reset_transcript_tracking(),e.m!=parent.current_m&&(parent.track_word(e.m),parent.scroll_to_current_word(),parent.update_progress_bar(e.m),parent.current_m=e.m),(clip=parent.onload_clip)&&(clip.video_id?parent.instance.player.play_video_id_at_time(clip.video_id,clip.in_time):parent.instance.player.seek(clip.in_time),parent.onload_clip=!1),parent.config().progress_actions)try{obj=JSON.parse(parent.config().progress_actions),obj.search&&parent.instance.player.duration()&&(parent.load_search_term(obj.search),delete obj.search,parent.update_config("progress_actions",obj))}catch(t){}}),p3$(this.instance).bind("transcript:selection",function(t,e){if(parent.config().clip_urls){var n="p3clip:"+parent.instance.instance_index+"."+parent.module_index+"."+e.in_time+"."+e.out_time;parent.config().platform_integration&&(n+="."+parent.instance.player.video_id()),location.href=location.href.replace(/#.*/,"")+"#"+n}parent.current_clip_selection=e}),p3$(this.instance).bind("transcript:transcript_set",function(){p3$(".p3sdk-interactive-transcript-toggle-keywords:checked, p3sdk-keywords-on").each(function(){parent.load_keywords(this)})})},this.load_keywords=function(t){this.config().project_id&&this.config().file_id?p3sdk.api.get_keywords_async(this.config(),{},function(t){parent.highlight_keywords(JSON.parse(t))}):p3$(t).attr("remote-src")?p3$.get(p3$(t).attr("remote-src"),function(t){parent.highlight_keywords(JSON.parse(t))}):p3$(t).attr("keywords")&&parent.highlight_keywords(JSON.parse(p3$(t).attr("keywords")))},this.highlight_keywords=function(obj){var keyvals={},re_arr=[],space_repl="(\\<[^\\>]*?\\>)*\\s*(\\<[^\\>]*?\\>)*\\s*",dostem="undefined"!=typeof Snowball;p3$.each(obj,function(t){var e=obj[t][0].replace(/^\s+|\s+$/,"");if(restr=e.replace(/\s+/g,space_repl),dostem){parent.stemmer=parent.stemmer||new Snowball("English");var n=e.split(/\s+/),i=[];for(j=0;j<n.length;j++){parent.stemmer.setCurrent(n[j]),parent.stemmer.stem();var r=parent.stemmer.getCurrent();i.push(r)}sstr=i.join(space_repl),keyvals[i.join(" ")]=obj[t][1],sstr!=restr&&(restr+="|"+sstr)}/\s/.test(e)?re_arr.unshift(restr):re_arr.push(restr),keyvals[e.toLowerCase()]=obj[t][1]});var bigre=eval('/<span[^>]+id="([^"]+?)"[^>]*>('+re_arr.join("|")+")[\b.!?)\"']*</gi"),matches={},tre=/\<[^\>]*\>/g;p3$(content_container).find("p").each(function(){matches={};var t=p3$(this).html();p3$(this).find("span").first().attr("m");t.replace(bigre,function(t,e,n){var i=n.replace(tre," ").replace(/\s+/g," ");matches[e]={s:i,v:keyvals[i.toLowerCase()]}});for(sid in matches)for(var e=p3$("#"+sid),n=matches[sid].s.split(/\s+/).length,i=0;i<n;i++){var r=140;matches[sid].v>150&&(r=matches[sid].v>165?233:185),p3$(e).css("font-size",r+"%"),p3$(e).addClass("p3sdk-transcript-keyword"),e=e.next()}}),parent.trigger_event("transcript:keywords_highlighted",{keywords:obj})},this.clear_keywords=function(){var t=p3$(content_container).find(".p3sdk-transcript-keyword");p3$(t).removeClass("p3sdk-transcript-keyword").css("font-size",""),parent.trigger_event("transcript:keywords_cleared",{})},this.cache_key=function(){return parent.instance.instance_index.toString()+parent.module_index.toString()},this.load_transcript=function(){this.config().embedded?parent.set_transcript(p3$(content_container).html()):this.config().project_id&&this.config().file_id?p3sdk.api.get_transcript_async(this.config(),{format:"tpm"},function(t){t.is_error?(parent.set_transcript("<p><span m='0'>No transcript</span></p>",{}),parent.trigger_event("transcript:transcript_not_found")):parent.set_transcript(t.transcript,t.file)}):p3$(container).attr("remote-src")&&("tpm"==parent.config().src_type?p3$.getJSON(p3$(container).attr("remote-src"),function(t){parent.set_transcript(t.transcript,t.file)}):p3$.get(p3$(container).attr("remote-src"),function(t){"custom"==parent.config().src_type&&(t=p3_interactive_transcript_custom_parser(t)),"srt"==parent.config().src_type&&(t=parent.srt_to_interactive(t)),parent.set_transcript(t)}))},this.load_remote_track=function(t,e){p3$.get(t,function(n){"srt"==e&&(n=parent.srt_to_interactive(n)),parent.set_transcript(n),parent.trigger_event("transcript:track_loaded",{track_url:t})})},this.set_transcript=function(t,e){p3$(content_container).html(t),p3$(content_container).find("p").each(function(){0==p3$(this).find("[m]").length&&p3$(this).remove()}),this.transcript_paragraphs=[],this.current_word=!1;var n=parent.cache_key();p3$(content_container).find("[m]").each(function(){var t=n+"_"+p3$(this).attr("m");p3$(this).attr("id",t)}),parent.trigger_event("transcript:transcript_set",e||{})},this.srt_to_interactive=function(t){var e=p3$.trim(t).split(/[\n\r]+/),n=[],r=0,a=[],s=!1;for(i=0;i<e.length;i++)line=e[i],parseInt(line,10)==r+1?(r+=1,r>1&&a.push("</span>"),s&&(n.push(a),a=[],s=!1)):/\-\-\>/.test(line)?(start_time=p3$.trim(line.split("-->")[0]),a.push("<span m='"+p3sdk.util.stamp_to_ms(start_time)+"'>")):""!=line&&(a.push(line),s=p3sdk.util.end_of_sentence(line));a.length>0&&n.push(a),output=[];for(i in n)output.push("<p>"+n[i].join(" ")+"</p>");return output.join("")},this.reset_transcript_tracking=function(){var t=["p3sdk-tracked-paragraph","p3sdk-current-word","p3sdk-tracked-word"];p3$(content_container).find("."+t.join(", .")).removeClass(t.join(" ")),parent.current_word=!1,parent.current_paragraph=!1},this.current_word=!1,this.current_paragraph=!1,this.track_word=function(t){0==parent.transcript_paragraphs.length&&p3$(content_container).find("p").each(function(){parent.transcript_paragraphs.push(parseInt(p3$(this).find("[m]").first().attr("m"),10))}),current_p_index=!1,p3$(parent.transcript_paragraphs).each(function(e,n){return n>t?(current_p_index=Math.max(0,e-1),!1):void p3$(p3$(content_container).find("p")[e]).addClass("p3sdk-tracked-paragraph")}),current_p_index===!1&&(current_p_index=parent.transcript_paragraphs.length-1);var e=!1,n=p3$(p3$(content_container).find("p")[current_p_index]);n.removeClass("p3sdk-tracked-paragraph");var r=n.find("span");if(p3$(r).each(function(){return t<parseInt(p3$(this).attr("m"),10)?(e=p3$(this),e=p3$(e).prev().length>0?p3$(e).prev():e,!1):void p3$(this).addClass("p3sdk-tracked-word")}),e||(current_p_index==parent.transcript_paragraphs.length-1?e=p3$(r).last():(lw=p3$(r).last(),fw=p3$(p3$(content_container).find("p")[current_p_index+1]).find("span")[0],e=p3$(Math.abs(parseInt(p3$(lw).attr("m"),10)-t)<Math.abs(parseInt(p3$(fw).attr("m"),10)-t)?lw:fw))),parent.current_word&&parent.transcript_paragraphs[current_p_index]==parent.current_paragraph&&p3$(parent.current_word).last()[0]!=p3$(e).prev()[0]&&parseInt(p3$(e).prev().attr("m"))>parseInt(p3$(parent.current_word).last().attr("m")))for(skipped_words=parent.find_words_between_highlighted(p3$(parent.current_word),p3$(e).prev()),i=0;i<skipped_words.length;i++)p3$(e).push(skipped_words[i][0]);parent.current_word&&p3$(parent.current_word).removeClass("p3sdk-current-word"),parent.current_word=e,parent.current_paragraph=parent.transcript_paragraphs[current_p_index],p3$(parent.current_word).removeClass("p3sdk-tracked-word").addClass("p3sdk-current-word"),parent.trigger_event("transcript:current_word",{m:t,current_word:parent.current_word})},this.find_words_between_highlighted=function(t,e){for(var n=[];t[0]!=e[0];)t=t.next(),n.push(t);return n},this.scroll_to_current_word=function(t){if((this.config().scroll_locked||this.config().scroll_always_off)&&!t)return!1;var e=this.current_word,n=p3$(content_container).find("span[m]").first(),i=p3$(content_container).scrollTop(),r=p3$(e).offset().top-p3$(n).offset().top;if(parent.config().light_scroll){var a=p3$(content_container).height();(r-i>.75*a||r-i<0)&&p3$(content_container).scrollTop(r)}else r!=this.current_scroll&&(this.current_scroll=r,p3$(content_container).scrollTop(r))},this.play_clip=function(t){parent.instance.player.seek(t.in_time)},this.update_progress_bar=function(t){p3$(container).find(".p3sdk-interactive-transcript-progress").each(function(){var e=100*(t/parent.instance.player.duration());p3$(this).css("width",e+"%")})},this.clear_searched_transcript=function(){p3$(content_container).find(".p3sdk-interactive-transcript-search-hit").removeClass("p3sdk-interactive-transcript-search-hit"),parent.trigger_event("transcript:clear_search")},this.load_search_term=function(t){p3$(".p3sdk-interactive-transcript-searchbox").val(t),this.search_transcript(obj.search)},this.search_transcript=function(t,e){this.clear_searched_transcript(),t=t.replace(/\"([^\s\"]+?)\"$/g,"$1");var n=/\".+\"/;n.test(t)||(t=t.replace(/\"/g,""));var i=p3$.trim(t).split(/\s+/);return parent.saved_search_term=i.join("|"),""!=i.join("")&&(n.test(t)||(parent.stemmer=parent.stemmer||new Snowball("English"),p3$.each(i,function(t,e){parent.stemmer.setCurrent(e),parent.stemmer.stem();var n=parent.stemmer.getCurrent();p3$.inArray(n,i)<0&&i.push(n)})),matches=parent.phrase_search_matches(i),e&&parent[e](matches),void parent.trigger_event("transcript:search",{searchterm:t,matches:matches}))},this.phrase_search_matches=function(sanitized_arr){var search_phrases=[],quoted=!1,open_quote=/^\"/,close_quote=/\"$/;phrasewords=[],p3$(sanitized_arr).each(function(t,e){quoted?close_quote.test(e)?(quoted=!1,e=e.replace(/\"$/,""),phrasewords.push(e),search_phrases.push(phrasewords.join(" ")),phrasewords=[]):phrasewords.push(e):open_quote.test(e)?(quoted=!0,e=e.replace(/^\"/,""),phrasewords=[e]):search_phrases.push(e)}),matches=[],matched_spans=[];var m_finder=/m\=\"(\d+)\"/gi,ck=parent.cache_key();return p3$(search_phrases).each(function(i,phrase){phrase=phrase.replace(/\s+/g,"(<[^>]+>|\\s)*"),phrase="(<[^>/]+>)[^<]*?\\b"+phrase;var re=eval("/("+phrase+")/gi");p3$(content_container).html().replace(re,function(t){t.replace(m_finder,function(){var t=parseInt(arguments[1],10);matches.push(t),p3$("#"+ck+"_"+t).addClass("p3sdk-interactive-transcript-search-hit")})})}),matches},this.init()},p3sdk.playlist=function(e,n){var r=n,s=this;this.results_container=p3$(n).find(".p3sdk-playlist-dynamic-list"),this.result_template=p3$(n).find(".p3sdk-playlist-dynamic-list-template").html(),this.no_results_template=p3$(n).find(".p3sdk-playlist-dynamic-list-no-results-template").html()||"No results",this.pagination_container=p3$(n).find(".p3sdk-playlist-dynamic-pagination"),this.pagination_template="<a href='javascript:void(0)' class='p3sdk-playlist-pagination-link' page='{page}' per_page='{per_page}' query='{query}'>{display_text}</a>",this.instance=e,this.module_index=e.playlists.length,this.init=function(){p3$(r).on("click",".p3sdk-playlist-play-video-id",function(){vid=p3$(this).attr("video_id"),s.instance.player.play_video_id(vid),s.trigger_event("playlist:video_played",{video_id:vid}),p3$(s.instance.interactive_transcripts).each(function(t,e){p3$(e.container).find(".p3sdk-interactive-transcript-searchbox").val(""),e.clear_searched_transcript()})}),p3$(r).on("click",".p3sdk-playlist-result-timeline",function(t){vid=p3$(this).attr("video_id"),duration=p3$(this).attr("duration"),percent=(t.pageX-p3$(this).offset().left)/p3$(this).offset().width,s.instance.player.play_video_id_at_time(vid,duration*percent),s.trigger_event("playlist:video_played",{video_id:vid}),p3$(s.instance.interactive_transcripts).each(function(t,e){e.update_config("progress_actions",{search:s.config().last_query})})}),p3$(r).on("click",".p3sdk-playlist-submit-search",function(){var t=p3$(r).find(".p3sdk-playlist-searchbox").val();s.search_files({query:t})}),p3$(r).on("keyup",".p3sdk-playlist-searchbox",function(t){switch(t.keyCode||t.which){case 13:s.search_files({query:p3$(this).val()});break;case 27:p3$(this).val(""),s.search_files()}}),p3$(r).on("click",".p3sdk-playlist-reset-search",function(){p3$(r).find(".p3sdk-playlist-searchbox").first().val(""),s.search_files("")}),p3$(r).on("click",".p3sdk-playlist-search-link",function(){p3$(r).find(".p3sdk-playlist-searchbox").first().val(p3$(this).html()),s.search_files({query:p3$(this).html()})}),p3$(r).on("change",".p3sdk-playlist-tag-selector",function(){t=p3$(this).val(),s.update_config("tags",t),s.trigger_event("playlist:tag_selected",{tag:t}),s.search_files({query:p3$(r).find(".p3sdk-playlist-searchbox").val()})}),p3$(r).on("click",".p3sdk-playlist-tag-list input[type=checkbox]",function(){tags=p3$(".p3sdk-playlist-tag-list :checked").pluck("value"),s.update_config("tags",tags.join(", ")),s.search_files({query:p3$(r).find(".p3sdk-playlist-searchbox").val()})}),p3$(r).on("click",".p3sdk-playlist-pagination-link",function(){var t={page:p3$(this).attr("page"),per_page:p3$(this).attr("per_page"),query:p3$(this).attr("query")};s.search_files(t)}),p3$(this.instance).bind("player:progress",function(){vid=s.instance.player.video_id(),p3$(r).find(".p3sdk-playlist-current-video").removeClass("p3sdk-playlist-current-video"),p3$(r).find("[video_id='"+vid+"']").addClass("p3sdk-playlist-current-video")}),this.search_files()},this.trigger_event=function(t,e){e=p3$.extend(e||{},{module_index:s.module_index,container_id:p3$(r).attr("id")}),s.instance.event.trigger(t,e)},this.config=function(){var t={},e=p3$(r).get(0).attributes;for(i in e){var n=e[i].nodeValue;switch(n){case"true":n=!0;break;case"false":n=!1}"undefined"!=typeof e[i].nodeName&&(t[e[i].nodeName]=n)}return t},this.update_config=function(t,e){p3$(r).attr(t,e)},this.search_files=function(t){t=t||{},url=this.config().project_id+"/linked_accounts/"+this.config().linked_account_id+"/",url+=t.query?"segmentmap.js":"playlist.js",t.page=t.page||1,t.per_page=t.per_page||this.config().per_page||6,tags=p3$.trim(t.tags||this.config().tags||""),tags&&(t.tags=tags.split(/\s*\,\s*/)),this.config().folder_id&&(t.batch_id=this.config().folder_id.split(/\s*\,\s*/)),this.config().sortby&&!t.query&&(t.sortby=this.config().sortby.replace(/\:.*$/,""),t.desc=/\:desc$/i.test(this.config().sortby)?1:0),s.update_config("last_query",t.query),p3sdk.api.getJSON(url,t,function(t){s.render_data(t)}),s.trigger_event("playlist:search",t)},this.render_data=function(t){for(this.render_pagination(t),p3$(s.results_container).html(""),files=t.files,i=0;i<files.length;i++)res=s.result_template.replace(/{name}/g,files[i].name).replace(/{duration}/g,p3sdk.util.ms_to_stamp(files[i].duration)).replace(/{attribute1}/g,files[i].attribute1).replace(/{attribute2}/g,files[i].attribute2).replace(/{attribute3}/g,files[i].attribute3).replace(/{thumbnail_full}/g,"<img src='"+files[i].thumbnail_url+"' width=100% height=100%>").replace(/{thumbnail\_(\d+)x(\d+)}/g,"<img src='"+files[i].thumbnail_url+"' width=$1px height=$2px>").replace(/{video_id}/g,files[i].video_id).replace(/{hit_count}/g,files[i].segmentmap?files[i].segmentmap.hits.length+(1==files[i].segmentmap.hits.length?" hit":" hits"):"").replace(/{result_timeline\_([\d\%]+)x(\d+)}/g,function(t,e,n){
return files[i].segmentmap?s.render_result_timeline(files[i],e,n):""}),p3$(s.results_container).append(res);if(0==files.length){var e=s.no_results_template;p3$(s.results_container).html(e)}s.trigger_event("playlist:search_results",t)},this.render_result_timeline=function(t,e,n){var i=p3$("<div></div>");return i.addClass("p3sdk-playlist-result-timeline"),i.attr("duration",t.duration),i.attr("video_id",t.video_id),i.css({position:"relative",display:"block",width:/\%/.test(e)?e:e+"px",height:n+"px"}),p3$.each(t.segmentmap.hits,function(e){var r=t.segmentmap.hits[e],a=p3$("<div></div>");a.addClass("p3sdk-playlist-result-timeline-match"),a.attr("timestamp",r.timestamp),a.attr("duration",r.timestamp+r.length),a.attr("video_id",t.video_id),a.attr("file_id",t.file_id),a.css({marginLeft:100*r.timestamp/t.duration+"%",position:"absolute",zIndex:1e3+e,width:Math.ceil(100*r.length/t.duration)+"%",display:"block",height:n+"px"}),i.append(a)}),i.prop("outerHTML")},this.render_pagination=function(t){for(p3$(s.pagination_container).html(""),summary=t.summary,null!=p3$(this.pagination_container).attr("first")&&(a=this.create_pagination_link(1,summary.per_page,summary.query,p3$(this.pagination_container).attr("first")||"&lt;&lt;"),p3$(s.pagination_container).append(a)),null!=p3$(this.pagination_container).attr("prev")&&(a=this.create_pagination_link(Math.max(1,summary.current_page-1),summary.per_page,summary.query,p3$(this.pagination_container).attr("prev")||"&lt;"),p3$(s.pagination_container).append(a)),null!=p3$(this.pagination_container).attr("limit")?(limit=parseInt(p3$(this.pagination_container).attr("limit")),x=Math.max(1,summary.current_page-Math.floor(limit/2)),x=Math.min(x,summary.total_pages-limit+1),y=Math.max(x,1)+limit-1,y=Math.min(y,summary.total_pages),x=y-limit+1,x=Math.max(1,x)):(x=1,y=summary.total_pages),i=x;i<=y;i++)a=p3$(this.create_pagination_link(i,summary.per_page,summary.query)),i==summary.current_page&&p3$(a).addClass("p3sdk-playlist-current-page"),p3$(s.pagination_container).append(a);null!=p3$(this.pagination_container).attr("next")&&(a=this.create_pagination_link(Math.min(summary.current_page+1,summary.total_pages),summary.per_page,summary.query,p3$(this.pagination_container).attr("next")||"&gt;"),p3$(s.pagination_container).append(a)),null!=p3$(this.pagination_container).attr("last")&&(a=this.create_pagination_link(summary.total_pages,summary.per_page,summary.query,p3$(this.pagination_container).attr("last")||"&gt;&gt;"),p3$(s.pagination_container).append(a))},this.create_pagination_link=function(t,e,n,i){return s.pagination_template.replace(/{page}/g,t).replace(/{per_page}/g,e).replace(/{query}/g,n||"").replace(/{display_text}/g,i||t)},this.init()},p3sdk.debug=function(t){console&&console.log&&console.dir&&("string"==typeof t?console.log(t):console.dir(t))},p3$(document).ready(function(){"undefined"!=typeof p3sdk_before_init&&p3sdk_before_init(),p3$(".p3sdk-container").each(function(){p3sdk.init(this)}),"undefined"!=typeof p3sdk_ready&&p3sdk_ready(p3sdk)});